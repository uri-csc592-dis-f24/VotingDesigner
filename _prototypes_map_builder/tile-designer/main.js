var canvas = document.querySelector("canvas");
var tilesetContainer = document.querySelector(".tileset-container");
var tilesetSelection = document.querySelector(".tileset-container_selection");
var tilesetImage = document.querySelector("#tileset-source");

const slider1 = document.getElementById("slider1");
const slider1Button = document.getElementById("slider1-button");
const slider2 = document.getElementById("slider2");
const slider2Button = document.getElementById("slider2-button");
const slider3 = document.getElementById("slider3");
const slider3Button = document.getElementById("slider3-button");


//Default image for booting up -> Just looks nicer than loading empty canvas
var topLayer = {};
var bottomLayer = {};
var middleLayer = {};
var defaultState = {};

var defaultState = [{"10-0":[1,6],"19-0":[1,6],"20-0":[1,6],"29-0":[1,6],"30-0":[1,6],"15-13":[5,11],"2-6":[5,11],"16-13":[5,11],"9-0":[1,6],"9-1":[1,6],"9-2":[1,6],"9-3":[1,6],"9-4":[1,6],"9-5":[1,6],"9-6":[1,6],"9-7":[1,6],"9-8":[1,6],"9-10":[1,6],"9-11":[1,6],"9-12":[1,6],"9-13":[1,6],"9-14":[1,6],"9-15":[1,6],"9-16":[1,6],"9-17":[1,6],"9-18":[1,6],"9-19":[1,6],"9-20":[1,6],"9-21":[1,6],"9-22":[1,6],"9-23":[1,6],"9-24":[1,6],"9-25":[1,6],"9-26":[1,6],"9-27":[1,6],"9-28":[1,6],"9-29":[1,6],"10-2":[1,6],"10-3":[1,6],"10-4":[1,6],"10-5":[1,6],"10-6":[1,6],"10-7":[1,6],"10-8":[1,6],"10-10":[1,6],"10-11":[1,6],"10-12":[1,6],"10-13":[1,6],"10-14":[1,6],"10-15":[1,6],"10-16":[1,6],"10-17":[1,6],"10-19":[1,6],"10-20":[1,6],"10-21":[1,6],"10-22":[1,6],"10-23":[1,6],"10-24":[1,6],"10-25":[1,6],"10-26":[1,6],"10-27":[1,6],"10-28":[1,6],"10-29":[1,6],"10-18":[1,6],"10-1":[1,6],"19-1":[1,6],"19-2":[1,6],"19-3":[1,6],"19-4":[1,6],"19-5":[1,6],"19-6":[1,6],"19-7":[1,6],"19-9":[1,6],"19-10":[1,6],"19-11":[1,6],"19-12":[1,6],"19-13":[1,6],"19-14":[1,6],"19-15":[1,6],"19-16":[1,6],"19-17":[1,6],"19-18":[1,6],"19-19":[1,6],"19-20":[1,6],"19-21":[1,6],"19-22":[1,6],"19-23":[1,6],"19-24":[1,6],"19-25":[1,6],"19-26":[1,6],"19-27":[1,6],"19-28":[1,6],"19-29":[1,6],"19-8":[1,6],"20-2":[1,6],"20-3":[1,6],"20-4":[1,6],"20-5":[1,6],"20-6":[1,6],"20-7":[1,6],"20-8":[1,6],"20-9":[1,6],"20-10":[1,6],"20-11":[1,6],"20-12":[1,6],"20-13":[1,6],"20-14":[1,6],"20-15":[1,6],"20-16":[1,6],"20-17":[1,6],"20-18":[1,6],"20-19":[1,6],"20-20":[1,6],"20-21":[1,6],"20-22":[1,6],"20-23":[1,6],"20-24":[1,6],"20-25":[1,6],"20-26":[1,6],"20-27":[1,6],"20-28":[1,6],"20-29":[1,6],"20-1":[1,6],"29-1":[1,6],"29-2":[1,6],"29-3":[1,6],"29-4":[1,6],"29-5":[1,6],"29-7":[1,6],"29-8":[1,6],"29-9":[1,6],"29-10":[1,6],"29-11":[1,6],"29-12":[1,6],"29-13":[1,6],"29-14":[1,6],"29-15":[1,6],"29-16":[1,6],"29-17":[1,6],"29-18":[1,6],"29-6":[1,6],"29-19":[1,6],"29-20":[1,6],"29-21":[1,6],"29-22":[1,6],"29-23":[1,6],"29-24":[1,6],"29-25":[1,6],"29-26":[1,6],"29-27":[1,6],"29-28":[1,6],"29-29":[1,6],"30-1":[1,6],"30-2":[1,6],"30-3":[1,6],"30-4":[1,6],"30-6":[1,6],"30-7":[1,6],"30-8":[1,6],"30-9":[1,6],"30-10":[1,6],"30-11":[1,6],"30-12":[1,6],"30-13":[1,6],"30-14":[1,6],"30-15":[1,6],"30-16":[1,6],"30-17":[1,6],"30-18":[1,6],"30-19":[1,6],"30-20":[1,6],"30-21":[1,6],"30-22":[1,6],"30-23":[1,6],"30-24":[1,6],"30-25":[1,6],"30-26":[1,6],"30-27":[1,6],"30-28":[1,6],"30-29":[1,6],"30-5":[1,6],"4-9":[1,6],"0-9":[1,6],"1-9":[1,6],"2-9":[1,6],"3-9":[1,6],"5-9":[1,6],"6-9":[1,6],"7-9":[1,6],"8-9":[1,6],"9-9":[1,6],"10-9":[1,6],"11-9":[1,6],"12-9":[1,6],"13-9":[1,6],"14-9":[1,6],"15-9":[1,6],"16-9":[1,6],"17-9":[1,6],"18-9":[1,6],"21-9":[1,6],"22-9":[1,6],"23-9":[1,6],"24-9":[1,6],"25-9":[1,6],"26-9":[1,6],"27-9":[1,6],"28-9":[1,6],"31-9":[1,6],"32-9":[1,6],"33-9":[1,6],"34-9":[1,6],"35-9":[1,6],"36-9":[1,6],"37-9":[1,6],"38-9":[1,6],"39-9":[1,6],"0-10":[1,6],"1-10":[1,6],"2-10":[1,6],"3-10":[1,6],"4-10":[1,6],"5-10":[1,6],"7-10":[1,6],"8-10":[1,6],"11-10":[1,6],"12-10":[1,6],"13-10":[1,6],"14-10":[1,6],"6-10":[1,6],"15-10":[1,6],"16-10":[1,6],"17-10":[1,6],"18-10":[1,6],"21-10":[1,6],"22-10":[1,6],"23-10":[1,6],"24-10":[1,6],"25-10":[1,6],"26-10":[1,6],"27-10":[1,6],"28-10":[1,6],"31-10":[1,6],"32-10":[1,6],"33-10":[1,6],"34-10":[1,6],"35-10":[1,6],"36-10":[1,6],"37-10":[1,6],"38-10":[1,6],"39-10":[1,6],"0-19":[1,6],"1-19":[1,6],"2-19":[1,6],"3-19":[1,6],"0-20":[1,6],"1-20":[1,6],"2-20":[1,6],"3-20":[1,6],"4-20":[1,6],"5-20":[1,6],"6-20":[1,6],"7-20":[1,6],"8-20":[1,6],"11-20":[1,6],"12-20":[1,6],"4-19":[1,6],"5-19":[1,6],"6-19":[1,6],"7-19":[1,6],"8-19":[1,6],"11-19":[1,6],"12-19":[1,6],"13-19":[1,6],"14-19":[1,6],"15-19":[1,6],"16-19":[1,6],"17-19":[1,6],"18-19":[1,6],"13-20":[1,6],"14-20":[1,6],"15-20":[1,6],"16-20":[1,6],"17-20":[1,6],"18-20":[1,6],"21-20":[1,6],"22-20":[1,6],"23-20":[1,6],"24-20":[1,6],"25-20":[1,6],"26-20":[1,6],"27-20":[1,6],"28-20":[1,6],"21-19":[1,6],"22-19":[1,6],"23-19":[1,6],"24-19":[1,6],"25-19":[1,6],"26-19":[1,6],"27-19":[1,6],"28-19":[1,6],"31-19":[1,6],"32-19":[1,6],"33-19":[1,6],"34-19":[1,6],"35-19":[1,6],"36-19":[1,6],"37-19":[1,6],"38-19":[1,6],"39-19":[1,6],"31-20":[1,6],"33-20":[1,6],"34-20":[1,6],"35-20":[1,6],"36-20":[1,6],"37-20":[1,6],"38-20":[1,6],"39-20":[1,6],"32-20":[1,6]},{},{}];
//Default 6 shapes
var basic_square = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-6":[4,1],"19-7":[4,1],"19-9":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"19-8":[4,1],"20-6":[4,1],"20-7":[4,1],"20-8":[4,1],"20-9":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-13":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"11-9":[4,1],"12-9":[4,1],"13-9":[4,1],"14-9":[4,1],"15-9":[4,1],"16-9":[4,1],"17-9":[4,1],"18-9":[4,1],"21-9":[4,1],"22-9":[4,1],"23-9":[4,1],"24-9":[4,1],"25-9":[4,1],"26-9":[4,1],"27-9":[4,1],"28-9":[4,1],"11-10":[4,1],"12-10":[4,1],"13-10":[4,1],"14-10":[4,1],"15-10":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"21-10":[4,1],"22-10":[4,1],"23-10":[4,1],"24-10":[4,1],"25-10":[4,1],"26-10":[4,1],"27-10":[4,1],"28-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"11-6":[4,1],"12-6":[4,1],"13-6":[4,1],"14-6":[4,1],"15-6":[4,1],"16-6":[4,1],"17-6":[4,1],"18-6":[4,1],"16-7":[4,1],"15-7":[4,1],"14-7":[4,1],"13-7":[4,1],"12-7":[4,1],"11-7":[4,1],"14-8":[4,1],"15-8":[4,1],"16-8":[4,1],"17-8":[4,1],"18-8":[4,1],"18-7":[4,1],"17-7":[4,1],"11-8":[4,1],"12-8":[4,1],"13-8":[4,1],"11-11":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-6":[4,1],"28-7":[4,1],"28-8":[4,1],"28-11":[4,1],"28-12":[4,1],"28-13":[4,1],"28-14":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-13":[4,1],"27-11":[4,1],"27-8":[4,1],"27-7":[4,1],"27-6":[4,1],"27-12":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-12":[4,1],"25-8":[4,1],"25-7":[4,1],"25-6":[4,1],"26-6":[4,1],"26-7":[4,1],"26-8":[4,1],"26-11":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"25-12":[4,1],"24-12":[4,1],"23-12":[4,1],"22-12":[4,1],"21-12":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1],"21-11":[4,1],"22-11":[4,1],"23-11":[4,1],"24-11":[4,1],"25-11":[4,1],"23-8":[4,1],"22-8":[4,1],"21-8":[4,1],"24-8":[4,1],"21-7":[4,1],"23-7":[4,1],"24-7":[4,1],"22-7":[4,1],"21-6":[4,1],"23-6":[4,1],"22-6":[4,1],"24-6":[4,1]},{"10-9":[4,5],"10-8":[4,5],"10-7":[4,5],"10-6":[4,5],"10-5":[4,5],"10-10":[4,5],"10-11":[4,5],"10-12":[4,5],"10-13":[4,5],"10-14":[4,5],"10-15":[4,5],"10-16":[4,5],"10-17":[4,5],"10-18":[4,5],"10-19":[4,5],"10-20":[4,5],"10-21":[4,5],"10-22":[4,5],"10-23":[4,5],"10-24":[4,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[4,5],"29-23":[4,5],"29-22":[4,5],"29-21":[4,5],"29-20":[4,5],"29-19":[4,5],"29-18":[4,5],"29-17":[4,5],"29-16":[4,5],"29-15":[4,5],"29-14":[4,5],"29-13":[4,5],"29-12":[4,5],"29-11":[4,5],"29-10":[4,5],"29-9":[4,5],"29-6":[4,5],"29-8":[4,5],"29-7":[4,5],"29-5":[4,5],"11-5":[4,5],"12-5":[4,5],"13-5":[4,5],"14-5":[4,5],"15-5":[4,5],"16-5":[4,5],"17-5":[4,5],"18-5":[4,5],"19-5":[4,5],"20-5":[4,5],"21-5":[4,5],"26-5":[4,5],"27-5":[4,5],"28-5":[4,5],"24-5":[4,5],"23-5":[4,5],"25-5":[4,5],"22-5":[4,5],"15-6":[0,7],"16-6":[0,7],"17-6":[0,7],"18-6":[0,7],"19-6":[0,7],"20-6":[0,7],"21-6":[0,7],"22-6":[0,7],"23-6":[0,7],"24-6":[0,7]},{}];
var basic_L = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-6":[4,1],"19-7":[4,1],"19-9":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"19-8":[4,1],"20-6":[4,1],"20-7":[4,1],"20-8":[4,1],"20-9":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-13":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"11-9":[4,1],"12-9":[4,1],"13-9":[4,1],"14-9":[4,1],"15-9":[4,1],"16-9":[4,1],"17-9":[4,1],"18-9":[4,1],"11-10":[4,1],"12-10":[4,1],"13-10":[4,1],"14-10":[4,1],"15-10":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"11-6":[4,1],"12-6":[4,1],"13-6":[4,1],"14-6":[4,1],"15-6":[4,1],"16-6":[4,1],"17-6":[4,1],"18-6":[4,1],"16-7":[4,1],"15-7":[4,1],"14-7":[4,1],"13-7":[4,1],"12-7":[4,1],"11-7":[4,1],"14-8":[4,1],"15-8":[4,1],"16-8":[4,1],"17-8":[4,1],"18-8":[4,1],"18-7":[4,1],"17-7":[4,1],"11-8":[4,1],"12-8":[4,1],"13-8":[4,1],"11-11":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-13":[4,1],"28-14":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-13":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1]},{"10-9":[4,5],"10-8":[4,5],"10-7":[4,5],"10-6":[4,5],"10-5":[4,5],"10-10":[4,5],"10-11":[4,5],"10-12":[4,5],"10-13":[4,5],"10-14":[4,5],"10-15":[4,5],"10-16":[4,5],"10-17":[4,5],"10-18":[4,5],"10-19":[4,5],"10-20":[4,5],"10-21":[4,5],"10-22":[4,5],"10-23":[4,5],"10-24":[4,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[4,5],"29-23":[4,5],"29-22":[4,5],"29-21":[4,5],"29-20":[4,5],"29-19":[4,5],"29-18":[4,5],"29-17":[4,5],"29-16":[4,5],"29-15":[4,5],"29-14":[4,5],"29-13":[4,5],"11-5":[4,5],"12-5":[4,5],"13-5":[4,5],"14-5":[4,5],"15-5":[4,5],"16-5":[4,5],"17-5":[4,5],"18-5":[4,5],"19-5":[4,5],"20-5":[4,5],"20-6":[4,5],"20-7":[4,5],"20-8":[4,5],"20-9":[4,5],"20-10":[4,5],"20-11":[4,5],"20-12":[4,5],"20-13":[4,5],"21-13":[4,5],"22-13":[4,5],"23-13":[4,5],"24-13":[4,5],"25-13":[4,5],"26-13":[4,5],"27-13":[4,5],"28-13":[4,5]},{}];
var basic_post = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-6":[4,1],"19-7":[4,1],"19-9":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"19-8":[4,1],"20-7":[4,1],"20-8":[4,1],"20-9":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"11-9":[4,1],"12-9":[4,1],"13-9":[4,1],"14-9":[4,1],"15-9":[4,1],"16-9":[4,1],"17-9":[4,1],"18-9":[4,1],"11-10":[4,1],"12-10":[4,1],"13-10":[4,1],"14-10":[4,1],"15-10":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"11-6":[4,1],"12-6":[4,1],"13-6":[4,1],"14-6":[4,1],"15-6":[4,1],"16-6":[4,1],"17-6":[4,1],"18-6":[4,1],"16-7":[4,1],"15-7":[4,1],"14-7":[4,1],"13-7":[4,1],"12-7":[4,1],"11-7":[4,1],"14-8":[4,1],"15-8":[4,1],"16-8":[4,1],"17-8":[4,1],"18-8":[4,1],"18-7":[4,1],"17-7":[4,1],"11-8":[4,1],"12-8":[4,1],"13-8":[4,1],"11-11":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1],"20-13":[4,1],"21-12":[4,1],"22-12":[4,1],"23-12":[4,1],"24-12":[4,1],"25-12":[4,1],"24-11":[4,1],"23-11":[4,1],"22-11":[4,1],"21-11":[4,1],"21-10":[4,1],"23-10":[4,1],"22-10":[4,1],"22-9":[4,1],"21-9":[4,1],"21-8":[4,1]},{"10-9":[3,5],"10-8":[3,5],"10-7":[3,5],"10-6":[3,5],"10-5":[3,5],"10-10":[3,5],"10-11":[3,5],"10-12":[3,5],"10-13":[3,5],"10-14":[3,5],"10-15":[3,5],"10-16":[3,5],"10-17":[3,5],"10-18":[3,5],"10-19":[3,5],"10-20":[3,5],"10-21":[3,5],"10-22":[3,5],"10-23":[3,5],"10-24":[3,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[5,5],"29-23":[5,5],"29-22":[5,5],"29-21":[5,5],"29-20":[5,5],"29-19":[5,5],"29-18":[5,5],"29-17":[5,5],"29-16":[5,5],"29-15":[5,5],"29-14":[5,5],"11-5":[4,5],"12-5":[4,5],"13-5":[4,5],"14-5":[4,5],"15-5":[4,5],"16-5":[4,5],"17-5":[4,5],"18-5":[4,5],"19-5":[4,5],"20-5":[5,5],"20-6":[4,5],"28-13":[5,5],"21-7":[4,5],"22-8":[4,5],"23-9":[4,5],"24-10":[4,5],"25-11":[4,5],"26-12":[4,5],"27-13":[4,5],"28-14":[4,5],"27-12":[5,5],"26-11":[5,5],"25-10":[5,5],"24-9":[5,5],"23-8":[5,5],"22-7":[5,5],"21-6":[5,5]},{}];
var basic_mpuzzle = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-6":[4,1],"19-7":[4,1],"19-9":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"19-8":[4,1],"20-6":[4,1],"20-7":[4,1],"20-8":[4,1],"20-9":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-13":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"16-9":[4,1],"17-9":[4,1],"18-9":[4,1],"21-9":[4,1],"22-9":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"21-10":[4,1],"22-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"16-6":[4,1],"17-6":[4,1],"18-6":[4,1],"16-7":[4,1],"16-8":[4,1],"17-8":[4,1],"18-8":[4,1],"18-7":[4,1],"17-7":[4,1],"11-11":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-11":[4,1],"28-12":[4,1],"28-13":[4,1],"28-14":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-13":[4,1],"27-11":[4,1],"27-12":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-12":[4,1],"26-11":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"25-12":[4,1],"24-12":[4,1],"23-12":[4,1],"22-12":[4,1],"21-12":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1],"21-11":[4,1],"22-11":[4,1],"23-11":[4,1],"24-11":[4,1],"25-11":[4,1],"22-8":[4,1],"21-8":[4,1],"21-7":[4,1],"22-7":[4,1],"21-6":[4,1],"22-6":[4,1],"23-10":[4,1],"23-9":[4,1],"23-8":[4,1],"23-7":[4,1],"23-6":[4,1]},{"10-11":[4,5],"10-12":[4,5],"10-13":[4,5],"10-14":[4,5],"10-15":[4,5],"10-16":[4,5],"10-17":[4,5],"10-18":[4,5],"10-19":[4,5],"10-20":[4,5],"10-21":[4,5],"10-22":[4,5],"10-23":[4,5],"10-24":[4,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[4,5],"29-23":[4,5],"29-22":[4,5],"29-21":[4,5],"29-20":[4,5],"29-19":[4,5],"29-18":[4,5],"29-17":[4,5],"29-16":[4,5],"29-15":[4,5],"29-14":[4,5],"29-13":[4,5],"29-12":[4,5],"29-11":[4,5],"16-5":[4,5],"17-5":[4,5],"18-5":[4,5],"19-5":[4,5],"20-5":[4,5],"21-5":[4,5],"22-5":[4,5],"16-6":[0,7],"17-6":[0,7],"18-6":[0,7],"19-6":[0,7],"20-6":[0,7],"21-6":[0,7],"22-6":[0,7],"23-5":[4,5],"23-6":[0,7],"15-5":[4,5],"15-6":[4,5],"15-7":[4,5],"15-8":[4,5],"15-9":[4,5],"15-10":[4,5],"14-10":[4,5],"13-10":[4,5],"12-10":[4,5],"11-10":[4,5],"10-10":[4,5],"24-5":[4,5],"24-6":[4,5],"24-7":[4,5],"24-8":[4,5],"24-9":[4,5],"24-10":[4,5],"25-10":[4,5],"26-10":[4,5],"27-10":[4,5],"28-10":[4,5],"29-10":[4,5]},{}];
var basic_fpuzzle = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-13":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"11-9":[4,1],"12-9":[4,1],"13-9":[4,1],"14-9":[4,1],"25-9":[4,1],"26-9":[4,1],"27-9":[4,1],"28-9":[4,1],"11-10":[4,1],"12-10":[4,1],"13-10":[4,1],"14-10":[4,1],"15-10":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"21-10":[4,1],"22-10":[4,1],"23-10":[4,1],"24-10":[4,1],"25-10":[4,1],"26-10":[4,1],"27-10":[4,1],"28-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"11-6":[4,1],"12-6":[4,1],"13-6":[4,1],"14-6":[4,1],"14-7":[4,1],"13-7":[4,1],"12-7":[4,1],"11-7":[4,1],"14-8":[4,1],"11-8":[4,1],"12-8":[4,1],"13-8":[4,1],"11-11":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-6":[4,1],"28-7":[4,1],"28-8":[4,1],"28-11":[4,1],"28-12":[4,1],"28-13":[4,1],"28-14":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-13":[4,1],"27-11":[4,1],"27-8":[4,1],"27-7":[4,1],"27-6":[4,1],"27-12":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-12":[4,1],"25-8":[4,1],"25-7":[4,1],"25-6":[4,1],"26-6":[4,1],"26-7":[4,1],"26-8":[4,1],"26-11":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"25-12":[4,1],"24-12":[4,1],"23-12":[4,1],"22-12":[4,1],"21-12":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1],"21-11":[4,1],"22-11":[4,1],"23-11":[4,1],"24-11":[4,1],"25-11":[4,1]},{"10-9":[4,5],"10-8":[4,5],"10-7":[4,5],"10-6":[4,5],"10-5":[4,5],"10-10":[4,5],"10-11":[4,5],"10-12":[4,5],"10-13":[4,5],"10-14":[4,5],"10-15":[4,5],"10-16":[4,5],"10-17":[4,5],"10-18":[4,5],"10-19":[4,5],"10-20":[4,5],"10-21":[4,5],"10-22":[4,5],"10-23":[4,5],"10-24":[4,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[4,5],"29-23":[4,5],"29-22":[4,5],"29-21":[4,5],"29-20":[4,5],"29-19":[4,5],"29-18":[4,5],"29-17":[4,5],"29-16":[4,5],"29-15":[4,5],"29-14":[4,5],"29-13":[4,5],"29-12":[4,5],"29-11":[4,5],"29-10":[4,5],"29-9":[4,5],"29-6":[4,5],"29-8":[4,5],"29-7":[4,5],"29-5":[4,5],"11-5":[4,5],"12-5":[4,5],"13-5":[4,5],"14-5":[4,5],"26-5":[4,5],"27-5":[4,5],"28-5":[4,5],"25-5":[4,5],"15-5":[4,5],"15-6":[4,5],"15-7":[4,5],"15-8":[4,5],"15-9":[4,5],"16-9":[4,5],"17-9":[4,5],"18-9":[4,5],"19-9":[4,5],"20-9":[4,5],"21-9":[4,5],"22-9":[4,5],"23-9":[4,5],"24-9":[4,5],"24-8":[4,5],"24-7":[4,5],"24-6":[4,5],"24-5":[4,5]},{}];
var basic_trapezium = [{"15-13":[4,1],"2-6":[5,11],"16-13":[4,1],"19-6":[4,1],"19-7":[4,1],"19-9":[4,1],"19-10":[4,1],"19-11":[4,1],"19-12":[4,1],"19-13":[4,1],"19-14":[4,1],"19-15":[4,1],"19-16":[4,1],"19-17":[4,1],"19-18":[4,1],"19-19":[4,1],"19-20":[4,1],"19-21":[4,1],"19-22":[4,1],"19-23":[4,1],"19-8":[4,1],"20-6":[4,1],"20-7":[4,1],"20-8":[4,1],"20-9":[4,1],"20-10":[4,1],"20-11":[4,1],"20-12":[4,1],"20-14":[4,1],"20-15":[4,1],"20-16":[4,1],"20-17":[4,1],"20-18":[4,1],"20-19":[4,1],"20-20":[4,1],"20-21":[4,1],"20-22":[4,1],"20-23":[4,1],"14-9":[4,1],"15-9":[4,1],"16-9":[4,1],"17-9":[4,1],"18-9":[4,1],"13-10":[4,1],"14-10":[4,1],"15-10":[4,1],"16-10":[4,1],"17-10":[4,1],"18-10":[4,1],"11-20":[4,1],"12-20":[4,1],"11-19":[4,1],"12-19":[4,1],"13-19":[4,1],"14-19":[4,1],"15-19":[4,1],"16-19":[4,1],"17-19":[4,1],"18-19":[4,1],"13-20":[4,1],"14-20":[4,1],"15-20":[4,1],"16-20":[4,1],"17-20":[4,1],"18-20":[4,1],"21-20":[4,1],"22-20":[4,1],"23-20":[4,1],"24-20":[4,1],"25-20":[4,1],"26-20":[4,1],"27-20":[4,1],"28-20":[4,1],"21-19":[4,1],"22-19":[4,1],"23-19":[4,1],"24-19":[4,1],"25-19":[4,1],"26-19":[4,1],"27-19":[4,1],"28-19":[4,1],"17-6":[4,1],"18-6":[4,1],"16-7":[4,1],"15-8":[4,1],"16-8":[4,1],"17-8":[4,1],"18-8":[4,1],"18-7":[4,1],"17-7":[4,1],"11-12":[4,1],"11-13":[4,1],"11-14":[4,1],"11-15":[4,1],"11-16":[4,1],"11-17":[4,1],"11-18":[4,1],"11-21":[4,1],"11-22":[4,1],"11-23":[4,1],"12-11":[4,1],"12-12":[4,1],"12-13":[4,1],"12-15":[4,1],"12-16":[4,1],"12-17":[4,1],"12-18":[4,1],"12-21":[4,1],"12-22":[4,1],"12-23":[4,1],"12-14":[4,1],"13-11":[4,1],"13-12":[4,1],"13-13":[4,1],"13-14":[4,1],"13-16":[4,1],"13-17":[4,1],"13-21":[4,1],"13-22":[4,1],"13-23":[4,1],"13-15":[4,1],"13-18":[4,1],"14-22":[4,1],"14-23":[4,1],"15-23":[4,1],"14-21":[4,1],"14-18":[4,1],"14-17":[4,1],"14-11":[4,1],"14-12":[4,1],"15-12":[4,1],"15-14":[4,1],"15-15":[4,1],"15-16":[4,1],"15-17":[4,1],"15-18":[4,1],"14-16":[4,1],"14-15":[4,1],"14-13":[4,1],"15-11":[4,1],"14-14":[4,1],"16-15":[4,1],"16-16":[4,1],"16-18":[4,1],"15-21":[4,1],"16-21":[4,1],"17-21":[4,1],"18-21":[4,1],"17-22":[4,1],"18-22":[4,1],"16-22":[4,1],"15-22":[4,1],"18-23":[4,1],"17-23":[4,1],"16-23":[4,1],"21-23":[4,1],"22-23":[4,1],"23-23":[4,1],"23-22":[4,1],"24-22":[4,1],"25-22":[4,1],"26-22":[4,1],"27-22":[4,1],"28-22":[4,1],"28-23":[4,1],"27-23":[4,1],"26-23":[4,1],"25-23":[4,1],"24-23":[4,1],"28-21":[4,1],"28-13":[4,1],"28-15":[4,1],"28-16":[4,1],"28-17":[4,1],"28-18":[4,1],"27-17":[4,1],"27-15":[4,1],"27-14":[4,1],"27-16":[4,1],"27-18":[4,1],"27-21":[4,1],"26-16":[4,1],"26-15":[4,1],"26-13":[4,1],"26-14":[4,1],"26-17":[4,1],"26-18":[4,1],"26-21":[4,1],"24-21":[4,1],"23-21":[4,1],"22-21":[4,1],"21-21":[4,1],"25-21":[4,1],"21-22":[4,1],"22-22":[4,1],"25-18":[4,1],"24-18":[4,1],"23-18":[4,1],"22-18":[4,1],"21-18":[4,1],"18-18":[4,1],"17-18":[4,1],"16-17":[4,1],"17-17":[4,1],"18-17":[4,1],"21-17":[4,1],"22-17":[4,1],"22-16":[4,1],"23-16":[4,1],"24-16":[4,1],"25-16":[4,1],"23-17":[4,1],"24-17":[4,1],"25-17":[4,1],"24-15":[4,1],"23-15":[4,1],"22-15":[4,1],"21-15":[4,1],"18-15":[4,1],"17-15":[4,1],"18-16":[4,1],"21-16":[4,1],"17-16":[4,1],"25-15":[4,1],"25-13":[4,1],"24-13":[4,1],"23-13":[4,1],"22-13":[4,1],"21-13":[4,1],"18-14":[4,1],"17-14":[4,1],"16-14":[4,1],"21-14":[4,1],"22-14":[4,1],"23-14":[4,1],"24-14":[4,1],"25-14":[4,1],"18-12":[4,1],"17-13":[4,1],"18-13":[4,1],"17-12":[4,1],"16-12":[4,1],"16-11":[4,1],"17-11":[4,1],"18-11":[4,1],"20-13":[4,1],"21-12":[4,1],"22-12":[4,1],"23-12":[4,1],"24-12":[4,1],"25-12":[4,1],"24-11":[4,1],"23-11":[4,1],"22-11":[4,1],"21-11":[4,1],"21-10":[4,1],"23-10":[4,1],"22-10":[4,1],"22-9":[4,1],"21-9":[4,1],"21-8":[4,1],"28-14":[4,1],"27-13":[4,1],"27-12":[4,1],"26-12":[4,1],"26-11":[4,1],"25-11":[4,1],"25-10":[4,1],"24-10":[4,1],"23-9":[4,1],"22-8":[4,1],"21-7":[4,1],"22-7":[4,1],"23-8":[4,1],"24-9":[4,1],"21-6":[4,1],"28-12":[4,1],"27-11":[4,1],"26-10":[4,1],"25-9":[4,1],"24-8":[4,1],"23-7":[4,1],"22-6":[4,1]},{"10-12":[3,5],"10-13":[3,5],"10-14":[3,5],"10-15":[3,5],"10-16":[3,5],"10-17":[3,5],"10-18":[3,5],"10-19":[3,5],"10-20":[3,5],"10-21":[3,5],"10-22":[3,5],"10-23":[3,5],"10-24":[3,5],"11-24":[4,5],"12-24":[4,13],"13-24":[4,11],"14-24":[4,11],"15-24":[5,13],"16-24":[4,5],"17-24":[4,5],"18-24":[4,5],"19-24":[4,5],"20-24":[4,5],"21-24":[4,5],"22-24":[4,5],"23-24":[4,5],"24-24":[4,5],"25-24":[4,5],"26-24":[4,5],"27-24":[4,5],"28-24":[4,5],"29-24":[5,5],"29-23":[5,5],"29-22":[5,5],"29-21":[5,5],"29-20":[5,5],"29-19":[5,5],"29-18":[5,5],"29-17":[5,5],"29-16":[5,5],"29-15":[5,5],"29-14":[5,5],"18-5":[4,5],"19-5":[4,5],"20-5":[4,5],"10-11":[4,5],"11-11":[4,5],"11-10":[4,5],"12-10":[4,5],"12-9":[4,5],"13-9":[4,5],"13-8":[4,5],"14-8":[4,5],"14-7":[4,5],"15-7":[4,5],"15-6":[4,5],"16-6":[4,5],"16-5":[4,5],"17-5":[4,5],"21-5":[4,5],"22-5":[4,5],"23-5":[4,5],"23-6":[4,5],"24-6":[4,5],"24-7":[4,5],"25-7":[4,5],"25-8":[4,5],"26-8":[4,5],"26-9":[4,5],"27-9":[4,5],"27-10":[4,5],"28-10":[4,5],"28-11":[4,5],"29-11":[4,5],"29-12":[4,5],"29-13":[4,5]},{}];
//BASIC SHAPES HERE:
const defaultstate = document.getElementById("default_design");
const button_square = document.getElementById("basic_square");
const button_L = document.getElementById("basic_L");
const button_postit = document.getElementById("basic_postit");
const button_mpuzzle = document.getElementById("basic_mpuzzle");
const button_fpuzzle = document.getElementById("basic_fpuzzle");
const button_trapezium = document.getElementById("basic_trapezium");

var selection = [0, 0]; //Which tile we will paint from the menu

var isMouseDown = false;
var currentLayer = 0;
var layers = [
   //Bottom
   {
      //Structure is "x-y": ["tileset_x", "tileset_y"]
      //EXAMPLE: "1-1": [3, 4],
   },
   //Middle
   {},
   //Top
   {}
];

//Select tile from the Tiles grid
tilesetContainer.addEventListener("mousedown", (event) => {
   selection = getCoords(event);
   tilesetSelection.style.left = selection[0] * 32 + "px";
   tilesetSelection.style.top = selection[1] * 32 + "px";
});

//Handler for placing new tiles on the map
function addTile(mouseEvent) {
   var clicked = getCoords(event);
   var key = clicked[0] + "-" + clicked[1];

   if (mouseEvent.shiftKey) {
      delete layers[currentLayer][key];
   } else {
      layers[currentLayer][key] = [selection[0], selection[1]];
   }
   draw();
}

//Bind mouse events for painting (or removing) tiles on click/drag
canvas.addEventListener("mousedown", () => {
   isMouseDown = true;
});
canvas.addEventListener("mouseup", () => {
   isMouseDown = false;
});
canvas.addEventListener("mouseleave", () => {
   isMouseDown = false;
});
canvas.addEventListener("mousedown", addTile);
canvas.addEventListener("mousemove", (event) => {
   if (isMouseDown) {
      addTile(event);
   }
});

//Utility for getting coordinates of mouse click
function getCoords(e) {
   const { x, y } = e.target.getBoundingClientRect();
   const mouseX = e.clientX - x;
   const mouseY = e.clientY - y;
   //this is for the mouse events based on the tile size, if you dont match the number with tile crop size,
   //your mouse click will not be accurate. KEEP IN MIND WHEN CHANGING DESIGN
   return [Math.floor(mouseX / 32), Math.floor(mouseY / 32)];
}

//converts data to image:data string and pipes into new browser tab
function exportImage() {
   var data = canvas.toDataURL();
   var image = new Image();
   image.src = data;

   var w = window.open("");
   w.document.write(image.outerHTML);
}

//Reset state to empty
function clearCanvas() {
   layers = [{}, {}, {}];
   draw();
}

function setLayer(newLayer) {
   //Update the layer
   currentLayer = newLayer;
   //Update the UI to show updated layer
   var oldActiveLayer = document.querySelector(".layer.active");
   var oldActiveIcon = document.querySelector(".pen-icon.active");
   if (oldActiveLayer) {
      oldActiveLayer.classList.remove("active");
      oldActiveIcon.classList.remove("active");
   }
   document.querySelector(`[tile-layer="${currentLayer}"]`).classList.add("active");
   document.querySelector(`[tile1-layer="${currentLayer}"]`).classList.add("active");
}

function draw() {
   var ctx = canvas.getContext("2d");
   ctx.clearRect(0, 0, canvas.width, canvas.height);

   //Size of each crop from the tileset. change canvas dimensions if you want different size. 
   //do NOT change tile crop.
   var size_of_crop = 32; 
   
   layers.forEach((layer) => {
      Object.keys(layer).forEach((key) => {
         //Determine x/y position of this placement from key ("3-4" -> x=3, y=4)
         var positionX = Number(key.split("-")[0]);
         var positionY = Number(key.split("-")[1]);
         var [tilesheetX, tilesheetY] = layer[key]; 

         ctx.drawImage(
            tilesetImage,
            tilesheetX * 32,//YOU CAN CHANGE THESE FOR THE SIZE OF TILESHEET, do not change the positions.
            tilesheetY * 32,
            size_of_crop,
            size_of_crop,
            positionX * 32, // positions need to match <size_of_crop> variable.
            positionY * 32,
            size_of_crop,
            size_of_crop
         );
      });
   });
}


defaultstate.addEventListener("click", function() {
   layers = defaultState;
   draw();
});

button_square.addEventListener("click", function() {
   layers = basic_square;
   draw();
});

button_L.addEventListener("click", function() {
   layers = basic_L;
   draw();
});

button_postit.addEventListener("click", function() {
   layers = basic_post;
   draw();
});

button_mpuzzle.addEventListener("click", function() {
   layers = basic_mpuzzle;
   draw();
});
button_fpuzzle.addEventListener("click", function() {
   layers = basic_fpuzzle;
   draw();
});
button_trapezium.addEventListener("click", function() {
   layers = basic_trapezium;
   draw();
});

//Initialize app when tileset source is done loading
tilesetImage.onload = function() {
   layers = defaultState;
   draw();
   setLayer(0);
}
tilesetImage.src = "https://assets.codepen.io/21542/TileEditorSpritesheet.2x_2.png";


function toggleSlider1() {
   if (document.querySelector('.slider1').className.match('slider slider1 on')) {
      bottomLayer = layers[0];
      layers[0]= {};
   }
   else{
      layers[0] = bottomLayer;
      bottomLayer= {};
   }
   draw();
   slider1.classList.toggle("on");
}

function toggleSlider2() {
   if (document.querySelector('.slider2').className.match('slider slider2 on')) {
      middleLayer = layers[1];
      layers[1]= {};
   }
   else{
      layers[1] = middleLayer;
      middleLayer= {};
   }
   draw();
   slider2.classList.toggle("on");
}

function toggleSlider3() {
   if (document.querySelector('.slider3').className.match('slider slider3 on')) {
      topLayer = layers[2];
      layers[2]= {};
   }
   else{
      layers[2] = topLayer;
      topLayer= {};
   }
   draw();
   slider3.classList.toggle("on");
}
